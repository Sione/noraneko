# 実装タスク

- [ ] 1. 試合開始と基本フローの確立
- [ ] 1.1 (P) 試合初期化と開始の画面遷移
  - メインメニューから対戦チーム選択へ遷移できるようにする
  - ホーム/ビジター選択と初期スコアを反映する
  - 試合開始メッセージと先発設定を表示する
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5_

- [ ] 1.2 イニング進行と攻守交代
  - イニング/表裏/攻守の表示を更新する
  - 打順開始とアウト3での交代処理を行う
  - イニング間のスコア更新を反映する
  - 各チームの打順位置を独立管理し、イニング間で継続する
  - _Requirements: 1.6, 1.7, 1.8, 1.9, 1.10, 3.38, 3.39, 3.40, 3.41, 3.42, 3.43_

- [ ] 1.3 試合終了条件と終了演出
  - 9回・延長・コールド・サヨナラの終了条件を判定する
  - 引き分け時の終了と試合時間の表示を行う
  - _Requirements: 1.11, 1.12, 1.13, 1.14, 1.15, 1.16, 1.17, 1.18_

- [ ] 2. 監督指示システムの実装（1球単位判定対応）
- [ ] 2.1 (P) 攻撃指示メニューと有効条件
  - 打席開始時に基本指示（通常打撃、バント、エンドラン、盗塁、待て）を提示する
  - 指示は打席開始時に1回のみ、打席中の変更は不可とする
  - 「待て」指示時に見逃し率+25%の効果を適用する
  - 走者状況に応じた追加指示を切り替える
  - 無効指示の警告と再提示を行う
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9, 2.10, 2.11, 2.12_

- [x] 2.2 (P) 守備指示メニューと投手/シフト操作
  - 守備ターンで指示メニューを表示する
  - 投手交代時に候補と疲労情報を提示する
  - 敬遠指示時は1球判定をスキップし即座に四球処理を実行する
  - 守備シフトの実行を反映する
  - _Requirements: 2.13, 2.14, 2.15, 2.16, 2.17, 3.34_

- [x] 2.3 指示制限とフィードバック
  - 2ストライク/ツーアウト/走力差の警告を表示する
  - バント指示時の2ストライクファウル三振リスクを警告する
  - 指示実行と結果説明を実況で返す
  - 指示と1球毎の詳細結果を試合ログへ記録する
  - _Requirements: 2.18, 2.19, 2.20, 2.21, 2.22, 2.23, 2.24, 2.25_

- [ ] 3. 1球単位判定システムの実装
- [ ] 3.1 (P) カウント管理とカウント状況判定
  - 打席開始時にカウント（B-S）を0-0に初期化する
  - 各投球結果に応じてカウントを更新する（ストライク/ボール/ファウル）
  - 2ストライク時のファウルはカウント維持（バントファウル除く）
  - 打者有利/投手有利/フルカウントの状況判定を行う
  - _Requirements: 3.6, 3.7, 3.11, 3.12, 3.22_

- [ ] 3.2 1球毎の判定ループ
  - 監督指示確定後に1球毎の判定ループを開始する
  - 各投球で5種類の結果（見逃しストライク/空振り/ボール/ファウル/インプレー）を判定する
  - 打席終了条件（3ストライク/4ボール/インプレー）をチェックする
  - 条件を満たさない場合は次の1球判定に進む
  - _Requirements: 3.13, 3.14, 3.15, 3.16, 3.17_

- [ ] 3.3 (P) 1球判定の確率計算エンジン
  - 投手Control値に基づくストライクゾーン投球確率を計算する
  - ストライクゾーン内での打者反応（見逃し/空振り/ファウル/インプレー）確率を計算する
  - ボールゾーンでの打者反応（見極め/空振り/ファウル/インプレー）確率を計算する
  - Eye/Discipline、Avoid K's、Contact、Stuff、Movement値の影響を適用する
  - _Requirements: 3.18, 3.19, 3.20, 3.21, 3.25, 3.26, 3.27, 3.28, 3.29, 3.30_

- [ ] 3.4 (P) カウント別補正の適用
  - 打者有利カウント（2-0, 3-0, 3-1）での投手ストライク率+10%、打者インプレー率+15%、長打確率+20%を適用する
  - 投手有利カウント（0-2, 1-2）での投手ボール率+15%、打者空振り+10%、ファウル+10%を適用する
  - フルカウント（3-2）での投手ストライク率+5%、打者インプレー率+10%を適用する
  - 初球（0-0）での打者見逃し率+10%を適用する
  - _Requirements: 3.22, 3.23, 3.24_

- [ ] 3.5 打席終了処理（三振・四球）
  - 三振時のアウトカウント増加、統計更新、実況表示を行う
  - 四球時の出塁処理、押し出し進塁、統計更新、実況表示を行う
  - 押し出し得点時の特別処理と実況を行う
  - アウトカウント判定（3アウトで攻守交代、未満で次打者）に進む
  - _Requirements: 3.31, 3.32, 3.33, 3.34, 3.35, 3.36, 3.37_

- [ ] 3.6 打順継続ルールの実装
  - 各チームの打順位置を独立管理する
  - イニング開始時に前回最後のアウト打者の次から開始する
  - 打席途中でイニング終了の場合、次回はその打者から開始する
  - 代打起用時の打順位置引継ぎを処理する
  - _Requirements: 3.38, 3.39, 3.40, 3.41, 3.42, 3.43_

- [ ] 4. 打撃結果の詳細判定（インプレー後）
- [ ] 4.1 打球種類/方向/強さの決定
  - ゴロ/フライ/ライナーの分布を計算する
  - 利き手と打球傾向で方向分布を調整する
  - 強さ判定と長打補正を適用する
  - _Requirements: 3.57, 3.58, 3.59, 3.60, 3.61, 3.62, 3.63, 3.64, 3.65, 3.66, 3.67, 3.68, 3.69_

- [ ] 4.2 守備判定への接続とヒット種類決定
  - 守備判定へ渡す打球情報を整理する
  - ヒット種類の確定条件を評価する
  - _Requirements: 3.70, 3.71, 3.72, 3.73, 3.74, 3.75, 3.76, 3.77, 3.78, 3.79, 3.80, 3.81_

- [ ] 4.3 状態補正（疲労/コンディション/左右）
  - 投球数による疲労減衰を計算する
  - 打者コンディションの上下を反映する
  - 左右の組み合わせ補正を適用する
  - _Requirements: 3.78, 3.79, 3.80, 3.81_

- [ ] 5. 守備判定とアウト処理
- [ ] 5.1 打球方向に基づく担当選手の特定
  - 守備位置と補助担当のルールを適用する
  - シフト適用時の処理条件を反映する
  - _Requirements: 3.70, 3.71, 3.72, 3.73, 3.74, 3.75_

- [ ] 5.2 ゴロ/フライ/ライナーの守備処理
  - 守備範囲・エラー・捕球判定を適用する
  - 内野/外野フライの分岐と結果処理を行う
  - ライナー特性の補正を適用する
  - _Requirements: 3.76, 3.77, 3.78, 3.79, 3.80, 3.81_

- [ ] 5.3 併殺/タッチアップ/送球選択
  - 併殺の2段階判定と失敗時の処理を行う
  - タッチアップの成功率を能力で評価する
  - 複数走者時の送球先選択を決定する
  - _Requirements: 3.76, 3.77, 3.78, 3.79, 3.80, 3.81_

- [ ] 5.4 守備エラー詳細と実況
  - エラー種別と進塁影響を判定する
  - 守備選手名を含む実況文を出力する
  - _Requirements: 3.51, 3.52, 3.53, 3.54, 3.55, 3.56_

- [ ] 5.5 インプレー完了後の処理
  - アウト/ヒット/ホームラン/エラーに応じたスコア・ランナー更新を行う
  - サヨナラ条件をチェックし、条件成立時は即座に試合終了処理を行う
  - アウトカウント判定と次打者/攻守交代処理に進む
  - _Requirements: 3.44, 3.45, 3.46, 3.47, 3.48, 3.49, 3.50, 3.51, 3.52, 3.53, 3.54, 3.55_

- [ ] 6. バント/スクイズ判定
- [ ] 6.1 バント打球の方向と処理
  - バント種類ごとの成功率を計算する
  - 打球方向と担当守備選手を決定する
  - 捕球/送球/到達時間を反映する
  - _Requirements: 3.82, 3.83, 3.84, 3.85, 3.86, 3.87, 3.88, 3.89, 3.90_

- [ ] 6.2 犠打バントと進塁判定
  - 犠打成功時の進塁処理を行う
  - 守備側の狙い判断と封殺成否を評価する
  - _Requirements: 3.91, 3.92, 3.93, 3.94, 3.95, 3.96, 3.97_

- [ ] 6.3 スクイズの判定
  - 打者/走者能力で成功率を計算する
  - 本塁送球の可否と結果を評価する
  - 成功/失敗時の得点処理を行う
  - _Requirements: 3.98, 3.99, 3.100, 3.101, 3.102, 3.103, 3.104, 3.105, 3.106, 3.107_

- [ ] 6.4 バント失敗の処理
  - バント失敗の結果種類を決定する
  - 2ストライク時のバントファウル三振処理を適用する
  - _Requirements: 3.108, 3.109, 3.110, 3.111, 3.112, 3.113, 3.114, 3.115, 3.116, 3.12_

- [ ] 7. 走塁と進塁判定
- [ ] 7.1 基本進塁ルール
  - 単打/二塁打/三塁打の進塁を確定する
  - 本塁打時の得点処理を行う
  - _Requirements: 3.152, 3.153, 3.154, 3.155, 3.156, 3.157_

- [ ] 7.2 単打時の本塁到達と追加進塁
  - 外野手送球と走者能力で本塁到達を判定する
  - 追加進塁の試行条件と成功率を評価する
  - _Requirements: 3.158, 3.159, 3.160, 3.161, 3.162, 3.163, 3.164, 3.165, 3.166, 3.167, 3.168, 3.169, 3.170, 3.171_

- [ ] 7.3 二塁打時の本塁到達と中継送球
  - 外野捕球位置に応じた判断を行う
  - 中継送球の段階的評価を行う
  - 送球先選択と悪送球時の処理を適用する
  - _Requirements: 3.172, 3.173, 3.174, 3.175, 3.176, 3.177, 3.178, 3.179, 3.180, 3.181, 3.182, 3.183, 3.184, 3.185_

- [ ] 7.4 得点と実況表示
  - 得点加算とスコア更新を行う
  - タイムリーやタッチアウトの実況を表示する
  - _Requirements: 3.192, 3.193, 3.194, 3.195_

- [ ] 8. 盗塁/ダブルスチール/エンドラン/牽制
- [ ] 8.1 盗塁の試行判定
  - 走者・投手・捕手能力で成功率を計算する
  - 塁上守備選手の処理を評価する
  - _Requirements: 3.117, 3.118, 3.119, 3.120, 3.121, 3.122, 3.123_

- [ ] 8.2 盗塁結果とダブルスチール
  - 成功/失敗の実況と結果処理を行う
  - ダブルスチールの送球選択と結果を評価する
  - _Requirements: 3.124, 3.125, 3.126, 3.127, 3.128, 3.129, 3.130, 3.131, 3.132, 3.133_

- [ ] 8.3 エンドラン判定
  - 打者結果に応じた走塁処理を行う
  - 成功時の実況と進塁増加を適用する
  - _Requirements: 3.134, 3.135, 3.136, 3.137, 3.138, 3.139, 3.140, 3.141, 3.142_

- [ ] 8.4 牽制プレイ判定
  - 牽制試行確率とリード幅評価を行う
  - 牽制成功/悪送球の処理を適用する
  - _Requirements: 3.143, 3.144, 3.145, 3.146, 3.147, 3.148, 3.149, 3.150, 3.151_

- [ ] 9. 選手能力システムとチーム運用
- [ ] 9.1 (P) 能力値モデルと分類ロジック
  - 打撃/投球/走塁/守備の能力値を保持する
  - 打者/投手タイプ分類と左右補正を適用する
  - 能力値の影響範囲をゲーム判定に反映する
  - _Requirements: 4.1-4.78_

- [ ] 9.2 コンディションと疲労の影響
  - コンディション段階による能力補正を行う
  - 疲労度の管理と能力減衰を適用する
  - _Requirements: 4.79-4.83, 4.97-4.105_

- [ ] 9.3 (P) 打順・ロースター運用
  - 先発/ベンチ構成と打順編集を提供する
  - 推奨打順の自動生成を行う
  - _Requirements: 4.84-4.90_

- [ ] 9.4 試合中の選手表示
  - 打者/投手の主要能力と成績を表示する
  - 左右の組み合わせ表示と投球数表示を行う
  - _Requirements: 4.91-4.96_

- [ ] 9.5 交代ルールの適用
  - 代打/守備固めの選択と反映を行う
  - 再出場不可とDHルールを適用する
  - _Requirements: 4.106-4.113_

- [ ] 9.6 (P) 能力値の可視化と総合評価
  - 能力値の色分け表示を行う
  - 総合評価の自動計算を実装する
  - 試合中成績の更新と保存を行う
  - _Requirements: 4.114-4.123_

- [ ] 10. 試合状況の可視化（1球単位判定対応）
- [ ] 10.1 (P) スコアボードとカウント表示
  - 得点/イニング/アウトを常時表示する
  - カウント（B-S形式）をスコアボード上に常時表示する
  - 各投球後にカウント表示をリアルタイム更新する
  - イニング別得点表と打順位置を表示する
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.42, 5.43_

- [ ] 10.2 (P) カウント状況の色分け表示
  - 打者有利カウント（2-0、3-0、3-1）を緑色で強調する
  - 投手有利カウント（0-2、1-2）を赤色で強調する
  - フルカウント（3-2）を黄色で強調する
  - _Requirements: 5.44, 5.45_

- [ ] 10.3 (P) 投球表示モードの実装
  - 詳細モード（1球毎に結果表示）を実装する
  - 簡易モード（最終結果のみ表示）を実装する
  - 設定画面から表示モードを切り替えられるUIを提供する
  - 表示モード設定をlocalStorageに保存する
  - _Requirements: 5.31, 5.32, 5.33, 5.34, 5.35, 5.36, 5.37_

- [ ] 10.4 (P) 投球表示速度の設定
  - 即座表示（待機なし）を実装する
  - 通常表示（0.5秒待機）を実装する
  - ゆっくり表示（1.5秒待機＋クリック続行）を実装する
  - _Requirements: 5.38, 5.39, 5.40, 5.41_

- [ ] 10.5 (P) 塁上ランナー表示
  - 塁状況の可視化と選手名表示を行う
  - 進塁/得点時に視覚的更新を行う
  - _Requirements: 5.7, 5.8, 5.9, 5.10, 5.11, 5.12_

- [ ] 10.6 実況とプレイ結果表示
  - 1球毎の投球結果を詳細モードで実況表示する
  - 打席終了時に結果サマリーを表示する
  - 重要プレイを強調表示する
  - _Requirements: 5.13, 5.14, 5.15, 5.16, 5.17, 5.18_

- [ ] 10.7 (P) 重要局面とガイダンス表示
  - 得点圏/接戦/サヨナラ機会のラベルを表示する
  - 次の操作を示すガイドを常時表示する
  - _Requirements: 5.19, 5.20, 5.21, 5.22, 5.23, 5.24_

- [ ] 10.8 (P) プレイログと履歴表示
  - 1球毎の詳細含むプレイ履歴を時系列で保存し表示する
  - イニング単位のフィルタを提供する
  - ログ件数制限と圧縮を適用する
  - _Requirements: 5.25, 5.26, 5.27, 5.28, 5.29, 5.30_

- [ ] 10.9 (P) UIレイアウトと情報整理
  - レスポンシブレイアウトを適用する
  - 情報量過多時の折りたたみ/モーダルを提供する
  - _Requirements: 5.26, 5.27, 5.28, 5.29, 5.30_

- [ ] 11. 勝敗判定と試合終了処理
- [ ] 11.1 通常終了時の勝敗判定
  - 9回終了条件と勝敗表示を行う
  - 最終スコアと成績サマリーを表示する
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8_

- [ ] 11.2 延長/サヨナラ/コールドの判定
  - 延長開始と回数表示を行う
  - サヨナラ条件と即時終了を適用する
  - コールド/ノーゲームの扱いを反映する
  - _Requirements: 6.9, 6.10, 6.11, 6.12, 6.13, 6.14, 6.15, 6.16, 6.17, 6.18_

- [ ] 11.3 試合終了後の保存と次アクション
  - 試合結果を保存し次の選択肢を提示する
  - MVP/ハイライト表示オプションを提供する
  - 集計値と個人成績を確定する
  - _Requirements: 6.19, 6.20, 6.21, 6.22, 6.23, 6.24, 6.25_

- [ ] 12. エラーハンドリングとユーザビリティ
- [ ] 12.1 (P) 入力エラー対応
  - 無効指示の理由を説明し再選択させる
  - エラー時に状態を維持し視覚的警告を表示する
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_

- [ ] 12.2 (P) システムエラーと自動保存
  - 例外時の緊急保存とエラーログを記録する
  - 再起動時の復旧確認ダイアログを表示する
  - _Requirements: 7.6, 7.7, 7.8, 7.9, 7.10_

- [ ] 12.3 中断/再開フロー
  - 一時停止メニューと保存/終了を提供する
  - 再開時に試合状態（カウント含む）を復元する
  - _Requirements: 7.11, 7.12, 7.13, 7.14, 7.15_

- [ ] 12.4 (P) 操作ガイドとヘルプ
  - 指示オプションの説明（1球単位判定への影響含む）を付与する
  - チュートリアル/ヘルプをモーダルで表示する
  - _Requirements: 7.16, 7.17, 7.18, 7.19, 7.20_

- [ ] 12.5 レスポンスと表示テンポ
  - 操作受付の即時反映と応答時間を維持する
  - テキスト速度と続行ボタンを制御する
  - _Requirements: 7.21, 7.22, 7.23, 7.24, 7.25_

- [ ] 12.6 (P) アクセシビリティとカスタマイズ
  - 表示言語/テーマ/難易度の設定を提供する
  - 投球表示モード/速度設定を提供する
  - 設定を保存して次回起動に反映する
  - _Requirements: 7.26, 7.27, 7.28, 7.29, 7.30_

- [ ] 13. 試合履歴と戦績管理
- [ ] 13.1 (P) 試合結果の保存
  - 試合結果とハイライト（1球単位の詳細含む）を永続化する
  - 保存完了メッセージを表示する
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5, 8.6, 8.7, 8.8_

- [ ] 13.2 (P) 履歴一覧の表示
  - 履歴一覧を新しい順に表示する
  - ページネーション/スクロールを提供する
  - _Requirements: 8.9, 8.10, 8.11, 8.12, 8.13, 8.14_

- [ ] 13.3 (P) 履歴詳細とログ
  - 試合詳細画面を表示する
  - プレイ履歴の詳細ログ（1球毎の記録含む）を表示する
  - _Requirements: 8.15, 8.16, 8.17, 8.18, 8.19, 8.20_

- [ ] 13.4 (P) 通算成績の集計
  - 勝率や自己ベストを計算して表示する
  - 戦績サマリーを見やすく表示する
  - _Requirements: 8.21, 8.22, 8.23, 8.24, 8.25, 8.26, 8.27, 8.28_

- [ ] 13.5 (P) フィルタと検索
  - 期間/勝敗/対戦相手のフィルタを実装する
  - フィルタ後の再集計を反映する
  - _Requirements: 8.29, 8.30, 8.31, 8.32, 8.33, 8.34_

- [ ] 13.6 (P) データ永続化と復元
  - 起動時に履歴データを復元する
  - 破損時のエラーメッセージと初期化を行う
  - _Requirements: 8.35, 8.36, 8.37, 8.38, 8.39, 8.40_

- [ ] 14. 選手・チームデータ管理
- [ ] 14.1 (P) デフォルト選手データのロード
  - 初回起動時のデータロードと検証を行う
  - エラー時の詳細表示とスキップ処理を行う
  - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6, 9.7, 9.8_

- [ ] 14.2 (P) 選手詳細表示
  - 能力値一覧と色分け表示を行う
  - 詳細画面の操作ボタンを提供する
  - _Requirements: 9.9, 9.10, 9.11, 9.12, 9.13, 9.14, 9.15, 9.16_

- [ ] 14.3 (P) 選手の新規作成
  - 作成フォームと必須項目入力を提供する
  - 能力値変更時に総合評価を更新する
  - 保存時の検証と確認メッセージを表示する
  - _Requirements: 9.17, 9.18, 9.19, 9.20, 9.21, 9.22, 9.23, 9.24_

- [ ] 14.4 (P) 選手の編集
  - 既存データを入力済みで表示する
  - 変更差分と確認ダイアログを表示する
  - _Requirements: 9.25, 9.26, 9.27, 9.28, 9.29, 9.30, 9.31, 9.32_

- [ ] 14.5 (P) 選手の削除
  - 削除確認と追加警告を表示する
  - 削除後の一覧復帰を行う
  - _Requirements: 9.33, 9.34, 9.35, 9.36, 9.37, 9.38, 9.39, 9.40_

- [ ] 14.6 (P) チーム管理とロースター編集
  - チーム作成/編集のフォームを提供する
  - ロースター最小人数の検証を行う
  - _Requirements: 9.41, 9.42, 9.43, 9.44, 9.45, 9.46, 9.47, 9.48_

- [ ] 14.7 (P) データのインポート/エクスポート
  - エクスポート対象の選択と保存を行う
  - インポートの検証と重複処理を行う
  - _Requirements: 9.49, 9.50, 9.51, 9.52, 9.53, 9.54, 9.55, 9.56_

- [ ] 14.8 (P) テンプレートとバッチ編集
  - プリセット適用とテンプレート保存を提供する
  - バッチ編集の確認と結果表示を行う
  - _Requirements: 9.57, 9.58, 9.59, 9.60, 9.61, 9.62, 9.63, 9.64_

- [ ] 14.9 (P) バックアップと整合性チェック
  - 自動バックアップと世代管理を行う
  - 破損検出時の復元処理を提供する
  - _Requirements: 9.65, 9.66, 9.67, 9.68, 9.69, 9.70, 9.71, 9.72_

- [ ] 15. CPU戦術AIの実装（1球単位判定対応）
- [ ] 15.1 基本AI判断と難易度
  - 攻守ターンに応じた判断フローを作る
  - 思考時間の演出と難易度補正を反映する
  - 1球単位判定システムに基づき、指示は打席終了まで変更不可とする
  - _Requirements: 10.1-10.6_

- [ ] 15.2 攻撃戦術の判断（カウント考慮）
  - 通常打撃/バント/盗塁/エンドラン/スクイズを選択する
  - 点差やカウント状況に応じた確率補正を適用する
  - 打者有利カウントでの盗塁成功率+20%、エンドラン選択確率1.5倍を適用する
  - _Requirements: 10.7-10.43_

- [ ] 15.3 守備戦術の判断（カウント考慮）
  - 投手交代の確率判断を行う
  - 敬遠の判断に打者有利カウントへの到達確率を考慮する
  - 守備シフトの選択を決定する
  - _Requirements: 10.44-10.59_

- [ ] 15.4 (P) AI委譲機能
  - AI委譲の選択肢と実行フローを用意する
  - 確認モード/常時委譲/難易度を設定できるようにする
  - ハイライト表示や手動復帰を提供する
  - _Requirements: 10.82-10.107_

- [ ] 15.5 (P) AI推奨表示と学習拡張
  - 一定時間無操作時のAI推奨を表示する
  - 推奨理由の表示と設定切替を提供する
  - 将来拡張の学習/適応フックを設ける
  - _Requirements: 10.108-10.115_

- [ ] 16. 守備シフトシステム
- [ ] 16.1 (P) シフト種別と選択条件
  - シフト種別と基本補正を定義する
  - 推奨表示と変更制約を適用する
  - _Requirements: 11.1-11.16_

- [ ] 16.2 ゴロ打球への効果
  - シフト方向に応じた補正を計算する
  - 前進守備の本塁阻止補正を適用する
  - _Requirements: 11.17-11.23_

- [ ] 16.3 フライ/ライナー/長打への効果
  - 深守備/前進守備の補正を適用する
  - 逆方向打球と長打への影響を反映する
  - 特殊状況の補正を適用する
  - _Requirements: 11.24-11.39_

- [ ] 16.4 (P) シフトの演出と統計
  - シフト指示と結果を実況に反映する
  - 使用回数/成功率の統計を記録する
  - _Requirements: 11.40-11.51_

- [ ] 16.5 CPUシフトと戦術調整
  - CPUのシフト選択確率を難易度で調整する
  - 試合状況に応じた戦術調整と交代判断を適用する
  - AI判断の演出とログ出力を行う
  - _Requirements: 10.60-10.81, 11.52-11.56_

- [ ] 17. 統合とシステム検証
- [ ] 17.1 1球単位判定システムの統合テスト
  - カウント進行と打席終了条件の全パターンをテストする
  - 各種指示と1球判定の連携をテストする
  - 表示モード（詳細/簡易）の切替動作を検証する
  - _Contracts: SimulationEngine, ProbabilityEngine, GameSaga_

- [ ] 17.2 試合全体フローの統合テスト
  - イニング進行と打順継続の動作を検証する
  - 試合終了条件（通常/延長/サヨナラ/コールド）を検証する
  - 中断/再開時のカウント復元を検証する
  - _Contracts: GameSlice, GameSaga, LocalStorageService_

- [ ] 17.3 (P) パフォーマンスとUX最適化
  - 1球判定ループの応答時間を計測・最適化する
  - 投球表示速度設定の動作を検証する
  - 長時間試合（延長12回）のメモリ使用量を検証する
  - _Contracts: All Engine layers_
