# 野球監督シミュレーション - タスク1.1実装完了

## 実装概要

タスク1.1「試合初期化と開始の画面遷移」の実装が完了しました。

## 実装内容

### 1. 型定義の作成

- `types/common.ts`: ゲームフェーズ、ポジション、走者状態などの共通型
- `types/player.ts`: 選手関連の型定義（打撃/投球/走塁/守備能力）
- `types/team.ts`: チーム関連の型定義

### 2. GameSliceの実装

`game/gameSlice.ts`に以下の機能を実装:

- 試合状態管理（スコア、イニング、アウトカウント、走者状態など）
- ゲームフェーズ遷移
- イベントログ管理
- 以下のアクション:
  - `setPhase`: ゲームフェーズの設定
  - `startTeamSetup`: チーム選択画面への遷移
  - `setTeams`: チーム設定
  - `startGame`: 試合開始
  - `startInning`: イニング開始
  - `endInning`: イニング終了
  - `endGame`: 試合終了
  - `updateOuts`: アウトカウント更新
  - `updateScore`: 得点更新
  - `addPlayEvent`: プレイイベント追加
  - `resetGame`: ゲームリセット

### 3. UIコンポーネントの実装

#### MainMenu (`game/GameBoard.tsx`)
- 新規試合、試合履歴、選手管理、設定のメニュー
- 新規試合ボタンでチーム選択画面に遷移

#### TeamSetup (`game/TeamSetup.tsx`)
- ホームチームとビジターチームの選択
- プレイヤー側（ホーム/ビジター）の選択
- 同一チーム選択の防止
- 次へボタンで打順確認画面に遷移

#### LineupEdit (`game/LineupEdit.tsx`)
- 両チームの打順表示
- 選手名、ポジション、打順番号の表示
- 試合開始ボタンで試合画面に遷移

#### GameScreen (`game/GameScreen.tsx`)
- スコアボード（得点、チーム名）
- 試合状況（イニング、アウトカウント、攻撃チーム）
- プレイログ（最新10件を表示）
- イニング開始メッセージの表示
- 2秒後に自動的に打席開始フェーズに遷移

### 4. サンプルデータの作成

`data/sampleData.ts`に以下を実装:

- ホームチーム（ホームドラゴンズ）の9人の選手データ
- ビジターチーム（ビジタータイガース）の9人の選手データ
- 各選手の詳細な能力値（打撃、投球、走塁、守備）
- チーム情報とデフォルト打順

### 5. スタイリング

- `GameBoard.css`: メインメニュー、チーム選択、打順確認画面のスタイル
- `GameScreen.css`: 試合画面、スコアボード、プレイログのスタイル
- グラデーション背景とモダンなUIデザイン

### 6. ルーティング統合

- `/baseball`ルートを追加
- App.tsxにナビゲーションリンクを追加
- フェーズに応じた画面切り替えロジック

## 要件との対応

以下の要件に対応しています:

### AC 1-5: 試合の初期化と開始
- ✅ AC 1: メインメニューで新規試合を選択すると対戦チーム選択画面を表示
- ✅ AC 2: 対戦チームを選択するとホーム/ビジター選択オプションを提示
- ✅ AC 3: 試合設定が完了すると初期化された試合状態を表示（スコア0-0、1回表、先発メンバー）
- ✅ AC 4: 試合開始時に両チームの先発投手と1番打者を自動設定
- ✅ AC 5: 試合開始時に「プレイボール！」メッセージを表示

## 画面遷移フロー

```
メインメニュー (idle)
    ↓ [新規試合]
チーム選択 (team_setup)
    ↓ [次へ]
打順確認 (lineup_edit)
    ↓ [試合開始]
試合開始 (inning_start)
    ↓ [2秒後自動]
打席開始 (at_bat)
```

## 動作確認方法

1. 開発サーバーを起動
   ```bash
   cd packages/frontend
   npm run dev
   ```

2. ブラウザで http://localhost:5174/baseball にアクセス

3. 以下の操作で動作確認:
   - メインメニューで「新規試合」をクリック
   - ホームチームとビジターチームを選択（異なるチームを選択）
   - 操作するチーム（ホーム/ビジター）を選択
   - 「次へ」をクリック
   - 打順を確認
   - 「試合開始」をクリック
   - スコアボードと試合状況が表示されることを確認
   - 「プレイボール！試合開始です。」のログが表示されることを確認
   - 2秒後に「1回表の攻撃です。」のログが追加されることを確認

## 次のステップ

タスク1.2「イニング進行と攻守交代」の実装に進みます:
- 打席の開始処理
- アウトカウント3での攻守交代
- イニング終了とスコア更新
- 表裏の切り替え処理
